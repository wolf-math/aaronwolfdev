"use strict";(globalThis.webpackChunkaaronwolf_dev=globalThis.webpackChunkaaronwolf_dev||[]).push([[6383],{490:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var o=s(5381),a=s(4848),t=s(8453);const r={slug:"async-await",title:"async/await",authors:"wolf",tags:["javascript"]},l=void 0,i={authorsImageUrls:[void 0]},c=[{value:"Example",id:"example",level:2},{value:"<strong>Example 2: Sequencing Multiple Async Operations</strong>",id:"example-2-sequencing-multiple-async-operations",level:2},{value:"<strong>Example 3: Running Async Operations in Parallel (Promise.all)</strong>",id:"example-3-running-async-operations-in-parallel-promiseall",level:3},{value:"<strong>Example 4: Async/Await in Loops</strong>",id:"example-4-asyncawait-in-loops",level:2},{value:"<strong>Example 5: Handling Delays (the <em>only</em> good use of <code>new Promise</code>)</strong>",id:"example-5-handling-delays-the-only-good-use-of-new-promise",level:2},{value:"<strong>Example 6: A Complete Real-World Workflow</strong>",id:"example-6-a-complete-real-world-workflow",level:2},{value:"<strong>Summary</strong>",id:"summary",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["The original version of this blog post was published on ",(0,a.jsx)(n.a,{href:"https://dev.to/wolfmath/async-await-13bn",children:"dev.to"})]})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"async"})," / ",(0,a.jsx)(n.code,{children:"await"})," is a newer way of writing asynchronous code compared to promises. The main advantages of ",(0,a.jsx)(n.code,{children:"async"}),"/",(0,a.jsx)(n.code,{children:"await"})," are improved readability and the avoidance of ",(0,a.jsx)(n.em,{children:"promise chaining"}),". Promises can become long, hard to read, and may contain deeply nested callbacks that can be difficult to debug."]}),"\n",(0,a.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,a.jsx)(n.p,{children:"Recall our fetch from before."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"fetch('https://jsonplaceholder.typicode.com/todos/1')\n  .then(response => response.json())\n  .then(data => console.log(data))\n  .catch(error => console.error('Error:', error))\n  .finally(() => console.log('All done'));\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Using ",(0,a.jsx)(n.code,{children:"async"}),"/",(0,a.jsx)(n.code,{children:"await"}),", the code can be refactored to look like this:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"async function fetchData() {\n  try {\n    const response = await fetch('https://jsonplaceholder.typicode.com/todos/1');\n    const data = await response.json();\n    console.log(data);\n  } catch (error) {\n    console.error('Error:', error);\n  } finally {\n    console.log('All done');\n  }\n}\n\nfetchData();\n"})}),"\n",(0,a.jsxs)(n.p,{children:["While it may be a few more lines of code, this version is easier to read because it resembles a normal synchronous function. Additionally, if the functions inside the ",(0,a.jsx)(n.code,{children:".then()"})," statements were more complex, readability and debuggability would be even more impacted. The ",(0,a.jsx)(n.code,{children:"async"}),"/",(0,a.jsx)(n.code,{children:"await"})," example is far clearer."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"example-2-sequencing-multiple-async-operations",children:(0,a.jsx)(n.strong,{children:"Example 2: Sequencing Multiple Async Operations"})}),"\n",(0,a.jsx)(n.p,{children:"Let\u2019s say we have three async functions:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"async function getUser(id) {\n  const res = await fetch(`https://jsonplaceholder.typicode.com/users/${id}`);\n  return res.json();\n}\n\nasync function getPosts(userId) {\n  const res = await fetch(`https://jsonplaceholder.typicode.com/posts?userId=${userId}`);\n  return res.json();\n}\n\nasync function getComments(postId) {\n  const res = await fetch(`https://jsonplaceholder.typicode.com/comments?postId=${postId}`);\n  return res.json();\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"We want to:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Get a user"}),"\n",(0,a.jsx)(n.li,{children:"Get that user\u2019s posts"}),"\n",(0,a.jsx)(n.li,{children:"Get comments for the first post"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'async function loadUserActivity(userId) {\n  try {\n    const user = await getUser(userId);\n    const posts = await getPosts(user.id);\n\n    const latest = posts[0];\n    const comments = await getComments(latest.id);\n\n    return {\n      user,\n      latestPost: latest,\n      comments\n    };\n  } catch (err) {\n    console.error("Error loading activity:", err);\n  }\n}\n'})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const activity = await loadUserActivity(1);\nconsole.log(activity);\n"})}),"\n",(0,a.jsxs)(n.p,{children:["This shows how async/await handles ",(0,a.jsx)(n.strong,{children:"dependent"})," operations cleanly and clearly."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"example-3-running-async-operations-in-parallel-promiseall",children:(0,a.jsx)(n.strong,{children:"Example 3: Running Async Operations in Parallel (Promise.all)"})}),"\n",(0,a.jsxs)(n.p,{children:["When two tasks do ",(0,a.jsx)(n.strong,{children:"not"})," depend on each other, run them together."]}),"\n",(0,a.jsx)(n.p,{children:"Instead of:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const comments = await getComments(postId);\nconst likes = await getLikes(postId);\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u2026which takes ",(0,a.jsx)(n.strong,{children:"twice as long"}),", use:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const [comments, likes] = await Promise.all([\n  getComments(postId),\n  getLikes(postId)\n]);\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Full example"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'async function getPostActivity(postId) {\n  try {\n    const [comments, likes] = await Promise.all([\n      getComments(postId),\n      getLikes(postId)\n    ]);\n\n    return { comments, likes };\n  } catch (err) {\n    console.error("Error loading post activity:", err);\n    return null;\n  }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"Parallelism is one of the biggest advantages of Promises \u2014 async/await lets you use it cleanly without chaining."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"example-4-asyncawait-in-loops",children:(0,a.jsx)(n.strong,{children:"Example 4: Async/Await in Loops"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"async"}),"/",(0,a.jsx)(n.code,{children:"await"})," does ",(0,a.jsx)(n.strong,{children:"not"})," work the way most people expect with ",(0,a.jsx)(n.code,{children:".forEach()"}),"."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Avoid:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"ids.forEach(async id => {\n  await doSomething(id);\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:["This does ",(0,a.jsx)(n.strong,{children:"not"})," wait. The loop finishes immediately."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Correct (sequential):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"for (const id of ids) {\n  await doSomething(id);\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"This ensures each operation finishes before the next begins."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Correct (parallel):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"await Promise.all(ids.map(id => doSomething(id)));\n"})}),"\n",(0,a.jsx)(n.p,{children:"This runs all tasks simultaneously \u2014 ideal when operations don\u2019t depend on each other."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"example-5-handling-delays-the-only-good-use-of-new-promise",children:(0,a.jsxs)(n.strong,{children:["Example 5: Handling Delays (the ",(0,a.jsx)(n.em,{children:"only"})," good use of ",(0,a.jsx)(n.code,{children:"new Promise"}),")"]})}),"\n",(0,a.jsxs)(n.p,{children:["You should almost never write ",(0,a.jsx)(n.code,{children:"new Promise()"})," yourself when using async/await."]}),"\n",(0,a.jsx)(n.p,{children:"The one valid exception is creating intentional delays:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'const wait = ms => new Promise(resolve => setTimeout(resolve, ms));\n\n// Usage:\nasync function demo() {\n  console.log("Start");\n  await wait(1000);\n  console.log("1 second later");\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"This is clean, predictable, and common in real-world async workflows (retry logic, animations, rate limiting, etc.)."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"example-6-a-complete-real-world-workflow",children:(0,a.jsx)(n.strong,{children:"Example 6: A Complete Real-World Workflow"})}),"\n",(0,a.jsx)(n.p,{children:"This combines everything:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Sequential steps"}),"\n",(0,a.jsx)(n.li,{children:"Parallel steps"}),"\n",(0,a.jsx)(n.li,{children:"Error handling"}),"\n",(0,a.jsx)(n.li,{children:"Returning structured data"}),"\n",(0,a.jsx)(n.li,{children:"Modern async patterns"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'async function getUserDashboard(userId) {\n  try {\n    // Step 1: Load user\n    const user = await getUser(userId);\n\n    // Step 2: Load user posts\n    const posts = await getPosts(user.id);\n    const latest = posts[0];\n\n    // Step 3: Load activity in parallel\n    const [comments, likes] = await Promise.all([\n      getComments(latest.id),\n      getLikes(latest.id)\n    ]);\n\n    return {\n      user,\n      latestPost: latest,\n      comments,\n      likes\n    };\n  } catch (err) {\n    console.error("Error loading dashboard:", err);\n    return null;\n  }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Usage"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"const dashboard = await getUserDashboard(1);\nconsole.log(dashboard);\n"})}),"\n",(0,a.jsx)(n.p,{children:"This pattern represents a typical async workflow in real applications:\nfetch \u2192 fetch \u2192 parallel fetch \u2192 return final result."}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"summary",children:(0,a.jsx)(n.strong,{children:"Summary"})}),"\n",(0,a.jsx)(n.p,{children:"From this point forward, you should be comfortable using:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u2714 Sequential async calls"}),"\n",(0,a.jsxs)(n.li,{children:["\u2714 Parallel async calls with ",(0,a.jsx)(n.code,{children:"Promise.all"})]}),"\n",(0,a.jsxs)(n.li,{children:["\u2714 ",(0,a.jsx)(n.code,{children:"try/catch"})," error handling"]}),"\n",(0,a.jsxs)(n.li,{children:["\u2714 Async loops (",(0,a.jsx)(n.code,{children:"for...of"})," or Promise.all with map)"]}),"\n",(0,a.jsxs)(n.li,{children:["\u2714 Avoiding ",(0,a.jsx)(n.code,{children:".then()"})," and ",(0,a.jsx)(n.code,{children:"new Promise()"})," unless truly necessary"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Async/await simplifies complex asynchronous logic and leads to code that is easier to write, debug, and understand."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},5381:e=>{e.exports=JSON.parse('{"permalink":"/blog/async-await","editUrl":"https://github.com/wolf-math/aaronwolfdev/tree/main/blog/2025-12-04-async-await.md","source":"@site/blog/2025-12-04-async-await.md","title":"async/await","description":"The original version of this blog post was published on dev.to","date":"2025-12-04T00:00:00.000Z","tags":[{"inline":false,"label":"javascript","permalink":"/blog/tags/javascript","description":"javascript articles"}],"readingTime":3.62,"hasTruncateMarker":true,"authors":[{"name":"Aaron wolf","title":"Lead writer and developer","url":"https://aaronwolf.dev","page":{"permalink":"/blog/authors/wolf"},"socials":{"linkedin":"https://www.linkedin.com/in/wolf-math/","github":"https://github.com/wolf-math"},"imageURL":"https://avatars.githubusercontent.com/u/29966332?v=4","key":"wolf"}],"frontMatter":{"slug":"async-await","title":"async/await","authors":"wolf","tags":["javascript"]},"unlisted":false,"nextItem":{"title":"My New Website","permalink":"/blog/new-site"}}')},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var o=s(6540);const a={},t=o.createContext(a);function r(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);