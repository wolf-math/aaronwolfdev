"use strict";(globalThis.webpackChunkaaronwolf_dev=globalThis.webpackChunkaaronwolf_dev||[]).push([[3828],{6932:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var o=n(9121),s=n(4848),r=n(8453);const i={slug:"promises-fetch",title:"Promises and fetch",authors:"wolf",tags:["javascript"]},a=void 0,l={authorsImageUrls:[void 0]},c=[{value:"Restaurants",id:"restaurants",level:2},{value:"JavaScript",id:"javascript",level:2},{value:"Creating a promise:",id:"creating-a-promise",level:3},{value:"Using a promise",id:"using-a-promise",level:3},{value:"Using fetch()",id:"using-fetch",level:2},{value:"Example",id:"example",level:2},{value:"Why?",id:"why",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["This blog post was originally published on ",(0,s.jsx)(t.a,{href:"https://dev.to/wolfmath/javascript-promises-fetch-46ja",children:"dev.to"})]})}),"\n",(0,s.jsx)(t.h2,{id:"restaurants",children:"Restaurants"}),"\n",(0,s.jsxs)(t.p,{children:["A promise in JavaScript is just a ",(0,s.jsx)(t.strong,{children:"pending task"}),". It\u2019s like ordering food at a restaurant: when you place your order, the server makes a ",(0,s.jsx)(t.em,{children:"promise"})," to bring the food you ordered. Once the food is brought to the table the promise has been fulfilled. If the food you ordered can\u2019t be served because the kitchen is out of a key ingredient, then you can ",(0,s.jsx)(t.em,{children:"catch"})," a meal somewhere else."]}),"\n",(0,s.jsx)(t.p,{children:"This is all asynchronous. When you sit down at the table, you might be chatting with a friend or scrolling on your phone. You pause what you were doing so that you can give your order to the server, then return to doing what you were doing beforehand."}),"\n",(0,s.jsx)(t.p,{children:"JavaScript promises work similarly. Since JavaScript is single-threaded, promises allow the JavaScript engine to move on to other tasks while it waits for certain operations to complete."}),"\n",(0,s.jsx)(t.h2,{id:"javascript",children:"JavaScript"}),"\n",(0,s.jsxs)(t.p,{children:["A promise is a specific type of object. All promises begin in a pending state. The callback function inside the promise, called an ",(0,s.jsx)(t.em,{children:"executor"}),", defines when to resolve or reject the promise."]}),"\n",(0,s.jsx)(t.h3,{id:"creating-a-promise",children:"Creating a promise:"}),"\n",(0,s.jsx)(t.p,{children:'Here, we\u2019re creating a new promise called order. If the promise is fulfilled, it resolves with the message "eat food". If it\u2019s rejected, it returns "find another restaurant" instead.'}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"const order = new Promise((resolve, reject) => {\n  if ( foodDelivered) {\n    resolve('eat food');\n  } else {\n    reject('find another restaurant');\n  }\n})\n"})}),"\n",(0,s.jsx)(t.p,{children:"Once the promise is created, you can use .then() and .catch() to decide what should happen depending on the outcome."}),"\n",(0,s.jsx)(t.h3,{id:"using-a-promise",children:"Using a promise"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"order\n  // wait for the asynchronous value to be fulfilled\n  .then(value => console.log(value))\n  // handle rejection\n  .catch(error => console.log(error))\n  .finally(() => console.log('all done'));\n"})}),"\n",(0,s.jsx)(t.h1,{id:"fetch",children:"Fetch"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"fetch"})," is a built-in function in JavaScript that ",(0,s.jsx)(t.em,{children:"returns a promise"}),". It makes an HTTP request and allows you to handle the response asynchronously with ",(0,s.jsx)(t.code,{children:".then()"})," and ",(0,s.jsx)(t.code,{children:".catch()"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"using-fetch",children:"Using fetch()"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"fetch('url')\n  .then(response => response.json())\n  .then(data => console.log(data))\n  .catch(error => console.log(error))\n  .finally(() => console.log('all done'));\n"})}),"\n",(0,s.jsx)(t.h1,{id:"the-call-stack-and-event-loop",children:"The Call Stack and Event Loop"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.em,{children:"call stack"})," manages ",(0,s.jsx)(t.strong,{children:"synchronous"})," tasks, keeping track of the order in which they execute. This is fairly straightforward: tasks are executed in the order they're written."]}),"\n",(0,s.jsxs)(t.p,{children:["However, ",(0,s.jsx)(t.strong,{children:"asynchronous"})," tasks are handled by the event loop. The event loop allows asynchronous code to be executed out of order, letting the JavaScript engine continue working on other tasks without waiting."]}),"\n",(0,s.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(t.p,{children:"How will this execute?"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'console.log("console log first!");\nsetTimeout( _ => console.log("set timeout second!"), 0);\nPromise.resolve().then(() => console.log("promise third"));\nconsole.log("console log last!!!");\n'})}),"\n",(0,s.jsx)(t.p,{children:"You might expect that it would execute in order, but it doesn\u2019t. The JavaScript event loop processes these instructions differently.\nThe result is actually this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:"> console log first!\n> console log last!!!\n> promise third\n> set timeout second!\n"})}),"\n",(0,s.jsx)(t.h2,{id:"why",children:"Why?"}),"\n",(0,s.jsx)(t.p,{children:"The event loop rearranges the execution priority:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:'Synchronous tasks (like console.log("console log first!") and console.log("console log last!!!")) are executed immediately, in the order they appear.'}),"\n",(0,s.jsx)(t.li,{children:"Microtasks (such as Promise callbacks) are given the next priority and are executed before any other asynchronous tasks."}),"\n",(0,s.jsx)(t.li,{children:"Macrotasks (like setTimeout) are handled last, even if the timeout is set to zero."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This allows the JavaScript engine to work asynchronously, performing other tasks without waiting for all operations to complete immediately."})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var o=n(6540);const s={},r=o.createContext(s);function i(e){const t=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:t},e.children)}},9121:e=>{e.exports=JSON.parse('{"permalink":"/blog/promises-fetch","editUrl":"https://github.com/wolf-math/aaronwolfdev/tree/main/blog/2024-10-09-promises-fetch.md","source":"@site/blog/2024-10-09-promises-fetch.md","title":"Promises and fetch","description":"This blog post was originally published on dev.to","date":"2024-10-09T00:00:00.000Z","tags":[{"inline":false,"label":"javascript","permalink":"/blog/tags/javascript","description":"javascript articles"}],"readingTime":2.76,"hasTruncateMarker":true,"authors":[{"name":"Aaron wolf","title":"Lead writer and developer","url":"https://aaronwolf.dev","page":{"permalink":"/blog/authors/wolf"},"socials":{"linkedin":"https://www.linkedin.com/in/wolf-math/","github":"https://github.com/wolf-math"},"imageURL":"https://avatars.githubusercontent.com/u/29966332?v=4","key":"wolf"}],"frontMatter":{"slug":"promises-fetch","title":"Promises and fetch","authors":"wolf","tags":["javascript"]},"unlisted":false,"prevItem":{"title":"The URL Object","permalink":"/blog/the-url-object"},"nextItem":{"title":"Encryption Part 4: Hashes","permalink":"/blog/encryption4"}}')}}]);