"use strict";(globalThis.webpackChunkaaronwolf_dev=globalThis.webpackChunkaaronwolf_dev||[]).push([[9376],{1092:e=>{e.exports=JSON.parse('{"permalink":"/blog/adding-stoarge-linux","editUrl":"https://github.com/wolf-math/aaronwolfdev/tree/main/blog/2020-11-19-adding-storage-to-linux.md","source":"@site/blog/2020-11-19-adding-storage-to-linux.md","title":"Adding storage to Linux","description":"This blog post was originally published on dev.to","date":"2020-11-19T00:00:00.000Z","tags":[{"inline":false,"label":"linux","permalink":"/blog/tags/linux","description":"linux articles"},{"inline":false,"label":"ubuntu","permalink":"/blog/tags/ubuntu","description":"ubuntu articles"}],"readingTime":4.63,"hasTruncateMarker":true,"authors":[{"name":"Aaron wolf","title":"Lead writer and developer","url":"https://aaronwolf.dev","page":{"permalink":"/blog/authors/wolf"},"socials":{"linkedin":"https://www.linkedin.com/in/wolf-math/","github":"https://github.com/wolf-math"},"imageURL":"https://avatars.githubusercontent.com/u/29966332?v=4","key":"wolf"}],"frontMatter":{"slug":"adding-stoarge-linux","title":"Adding storage to Linux","authors":"wolf","tags":["linux","ubuntu"]},"unlisted":false,"prevItem":{"title":"Set up a Samba server on Ubuntu Linux","permalink":"/blog/samba-server-setup"}}')},6357:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var o=n(1092),s=n(4848),i=n(8453);const r={slug:"adding-stoarge-linux",title:"Adding storage to Linux",authors:"wolf",tags:["linux","ubuntu"]},a=void 0,d={authorsImageUrls:[void 0]},l=[];function h(e){const t={a:"a",admonition:"admonition",code:"code",img:"img",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["This blog post was originally published on ",(0,s.jsx)(t.a,{href:"https://dev.to/wolfmath/how-to-add-storage-to-a-linux-file-system-5b8b",children:"dev.to"})]})}),"\n",(0,s.jsx)(t.p,{children:"Maybe you have a home server that you'd like to have some more storage space on. Maybe you have a desktop or laptop that needs more storage. In this tutorial I will show you how to add an HDD or SDD (or even a flash drive) to a Linux computer."}),"\n",(0,s.jsx)(t.p,{children:"I'm doing this exercise with a blank flash drive. If you'd also like to practice with a blank flash drive make sure it is unformatted."}),"\n",(0,s.jsx)(t.p,{children:"#Step 1: Find out the name of your new drive."}),"\n",(0,s.jsxs)(t.p,{children:["Prior to installing the new drive, open the terminal and run ",(0,s.jsx)(t.code,{children:"sudo fdisk -l"}),". There you will see all of the drives and their names. I have a single NVME drive on my laptop, so the output looks like this..."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/s8cpdvsifur3c5oqljop.png",alt:"Alt Text"})}),"\n",(0,s.jsxs)(t.p,{children:["I have 1 SSD named ",(0,s.jsx)(t.code,{children:"/dev/nvme0n1"}),", with two partitions ",(0,s.jsx)(t.code,{children:"/dev/nvme0n1p1"})," and ",(0,s.jsx)(t.code,{children:"/dev/nvme0n1p2"})," (ignore any ",(0,s.jsx)(t.code,{children:"Disk /dev/loop"})," things you may see)."]}),"\n",(0,s.jsxs)(t.p,{children:["Physically install the new drive then run ",(0,s.jsx)(t.code,{children:"sudo fdisk -l"})," again to see what's new. Again, ignore any ",(0,s.jsx)(t.code,{children:"loop"}),"s you may see. The new drive that wasn't there before is what you should be looking out for."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/2j01ic33vuxresozxx9h.png",alt:"Alt Text"})}),"\n",(0,s.jsxs)(t.p,{children:["My new drive is called ",(0,s.jsx)(t.code,{children:"sdc"}),". So all of my actions henceforth will be on ",(0,s.jsx)(t.code,{children:"sdc"}),". This drive is completely blank, it is not formatted at all, so I need to format the drive."]}),"\n",(0,s.jsx)(t.p,{children:"#Step 2: Format the Drive (optional if your drive is already formatted)"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Warning: This step will wipe anything that might be on the drive. Skip this step if your drive already has information that you'd like to be available upon mounting."})}),"\n",(0,s.jsxs)(t.p,{children:["In the terminal run ",(0,s.jsx)(t.code,{children:"sudo fdisk /dev/sdc"})," replacing ",(0,s.jsx)(t.code,{children:"sdc"})," with the name of your drive if it's different. You will get the following..."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/qcq3e6slgfoco30s2wrk.png",alt:"Alt Text"})}),"\n",(0,s.jsxs)(t.p,{children:["Feel free to type ",(0,s.jsx)(t.code,{children:"m"})," to see all the options. First we will create a new partition table. Select ",(0,s.jsx)(t.code,{children:"g"}),". You may get a warning if you're writing over an old partition table."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/ljbfbzsvm1ju41ux9s56.png",alt:"Alt Text"})}),"\n",(0,s.jsxs)(t.p,{children:["Set up a new partition with selection ",(0,s.jsx)(t.code,{children:"n"}),". The prompt asks how many partitions you want and sector sizes. I'm leaving everything to the defaults. If ",(0,s.jsx)(t.code,{children:"fdisk"})," prompts you if you want to remove a signature type ",(0,s.jsx)(t.code,{children:"y"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/xysu44mawmpdy6yi8fm0.png",alt:"Alt Text"})}),"\n",(0,s.jsxs)(t.p,{children:["Then press ",(0,s.jsx)(t.code,{children:"p"})," to see all your changes, and ",(0,s.jsx)(t.code,{children:"w"})," to write your changes to the disk."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/1b6zvgrcwt4gj6vel19c.png",alt:"Alt Text"})}),"\n",(0,s.jsxs)(t.p,{children:["If you run ",(0,s.jsx)(t.code,{children:"sudo fdisk -l"})," again you'll see that your changes  were written to the disk. Notice how there's a ",(0,s.jsx)(t.strong,{children:"1"})," at the end of ",(0,s.jsx)(t.code,{children:"sdc"}),". This indicates the partition. We will need that for the next step."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/cxy2f027rnqfc1alc0fs.png",alt:"Alt Text"})}),"\n",(0,s.jsxs)(t.p,{children:["Lastly we will make an ",(0,s.jsx)(t.code,{children:"ext4"})," partition."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"sudo mkfs.ext4 /dev/sdc1"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/nz9iki3xb51fc1todhyn.png",alt:"Alt Text"})}),"\n",(0,s.jsx)(t.p,{children:"#Step 3: Mount the Drive"}),"\n",(0,s.jsxs)(t.p,{children:["Most of the time drives are mounted to ",(0,s.jsx)(t.code,{children:"/mnt"}),", but you can really mount this disk wherever you want. If you want more space in your home directory you'd mount to ",(0,s.jsx)(t.code,{children:"/home/[username]/"}),", replacing ",(0,s.jsx)(t.code,{children:"[username]"})," with whatever user you want to add storage to. I'm (theoretically) working on a server, so I'm mounting my drive to a directory in ",(0,s.jsx)(t.code,{children:"/mnt"})," that I've named ",(0,s.jsx)(t.code,{children:"newdir"}),". I personally think it's good practice to have a directory specific to the drive you want to mount."]}),"\n",(0,s.jsxs)(t.p,{children:["This is really easy as all we need to do is...\n",(0,s.jsx)(t.code,{children:"sudo mount /dev/sdc1 /mnt/newdir"}),"\nor more generally ",(0,s.jsx)(t.code,{children:"sudo mount [drive name] [location]"})]}),"\n",(0,s.jsxs)(t.p,{children:["If we ",(0,s.jsx)(t.code,{children:"df -h"})," we'll see the change.\n",(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/d9nx4zqa8kymukr1wznh.png",alt:"Alt Text"})]}),"\n",(0,s.jsxs)(t.p,{children:["To unmount the drive we use the ",(0,s.jsx)(t.code,{children:"umount"})," command.\n",(0,s.jsx)(t.code,{children:"sudo umount /mnt/newdir"}),". The directory will still be there, but the drive and it's contents will be gone."]}),"\n",(0,s.jsxs)(t.p,{children:["Again ",(0,s.jsx)(t.code,{children:"df -h"})," will show the change."]}),"\n",(0,s.jsx)(t.p,{children:"#Step 4: Making mounting permanent"}),"\n",(0,s.jsxs)(t.p,{children:["If you reboot your machine (assuming you didn't use the ",(0,s.jsx)(t.code,{children:"umount"})," command above) you'll notice that the drive is no longer there. In order to make this a permanent mount you'll need to edit the configuration file ",(0,s.jsx)(t.code,{children:"etc/fstab"}),". This file is read at boot so it knows which drives to mount where. You'll see the root file system already there."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"sudo nano /etc/fstab"}),". Feel free to use ",(0,s.jsx)(t.code,{children:"vi"})," if you're a snob."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/v9fkng4od8pbwbx3ql0k.png",alt:"Alt Text"})}),"\n",(0,s.jsxs)(t.p,{children:["Add a new line. You can use spaces or tabs between the values. The first value is the device. The second is the location it should be mounted. The third value is the filesystem type. I'm not entirely sure what ",(0,s.jsx)(t.code,{children:"defaults"})," does, but it always works for me. Google it \xaf_(\u30c4)_/\xaf . The next two numbers refer to read order. 0 0  or 0 1 work best.\n",(0,s.jsx)(t.code,{children:"/dev/sdc1 /mnt/newdir ext4 defaults 0 0"})]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/26nfjw8nn7jxdh3zl9a6.png",alt:"Alt Text"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"WARNING:"})," If you make a mistake with the root filesystem your machine will not boot again"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Make sure everything works with the following command"}),"\n",(0,s.jsx)(t.code,{children:"sudo mount -a"})]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://dev-to-uploads.s3.amazonaws.com/i/6vb8h6jqrvanj4n56ieq.png",alt:"Alt Text"})}),"\n",(0,s.jsx)(t.p,{children:"If you get no output you're good to go. If however you get a warning make sure to go back and check your work."}),"\n",(0,s.jsx)(t.p,{children:"#Now you're done.\nEnjoy your new expanded storage."})]})}function c(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var o=n(6540);const s={},i=o.createContext(s);function r(e){const t=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);