"use strict";(globalThis.webpackChunkaaronwolf_dev=globalThis.webpackChunkaaronwolf_dev||[]).push([[673],{2170:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>g,frontMatter:()=>i,metadata:()=>r,toc:()=>l});var r=t(9867),o=t(4848),a=t(8453);const i={slug:"react-dnd",title:"Drag and drop from scratch with React",authors:"wolf",tags:["javascript","react"]},s=void 0,d={authorsImageUrls:[void 0]},l=[{value:"Intro",id:"intro",level:2},{value:"Important info",id:"important-info",level:2},{value:"Drag and Drop in HTML5",id:"drag-and-drop-in-html5",level:2},{value:"Getting started",id:"getting-started",level:2},{value:"This is what it looks like",id:"this-is-what-it-looks-like",level:2},{value:"Conclusion",id:"conclusion",level:2}];function c(n){const e={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{id:"intro",children:"Intro"}),"\n",(0,o.jsx)(e.p,{children:"In this tutorial I will show how to make a Drag and Drop component from scratch with no 3rd party libraries using React."}),"\n",(0,o.jsx)(e.h2,{id:"important-info",children:"Important info"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:["There exists the event handler ",(0,o.jsx)(e.code,{children:"e.dataTransfer"})," which helps with drag and drop functionality, but as we're using React I find using state to be simpler."]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsxs)(e.p,{children:["Make sure to check out the ",(0,o.jsx)(e.a,{href:"https://codesandbox.io/s/change-cursor-on-dragover-rfl5u?file=/src/Dnd.js",children:"Code Sandbox"}),". I may add a few things that aren't reflected below, but the code below is complete."]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["\n",(0,o.jsx)(e.p,{children:"You might know a better way to do this! If you think you can improve the code please comment."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"drag-and-drop-in-html5",children:"Drag and Drop in HTML5"}),"\n",(0,o.jsxs)(e.p,{children:["There are a few new elements that we will be using thought we're not using ",(0,o.jsx)(e.em,{children:"all"})," of the HTML5 Drag and Drop elements."]}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"draggable"})," makes a div ",(0,o.jsx)(e.strong,{children:"draggable"})," (instead of highlighting when you click and drag)"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"onDragStart"})," fires ONCE when you ",(0,o.jsx)(e.strong,{children:"begin"})," to drag"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"onDragEnter"})," fires ONCE when the dragged div ",(0,o.jsx)(e.strong,{children:"enters"})," another."]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"onDragOver"})," fires ",(0,o.jsx)(e.strong,{children:"CONTINUOUSLY"})," when ",(0,o.jsx)(e.strong,{children:"dragging over"})," a div"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.code,{children:"onDrop"})," fires when the ",(0,o.jsx)(e.strong,{children:"mouse click is released"})]}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"The final 4 of these we will pass to JavaScript to give it the DND logic."}),"\n",(0,o.jsx)(e.h2,{id:"getting-started",children:"Getting started"}),"\n",(0,o.jsxs)(e.p,{children:["Let's make a some ",(0,o.jsx)(e.code,{children:"groups"})," to drag between and some ",(0,o.jsx)(e.code,{children:"item"}),"s to be dragged around."]}),"\n",(0,o.jsx)(e.p,{children:"Dnd.js"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:'import React, { useState } from "react";\nimport "./Dnd.scss";\n\nexport default function Dnd() {\n\n  // my groups to be dragged between\n\n  const groups = ["group1", "group2", "group3", "noDrop"];\n\n  // My items to be dragged around\n\n  const initialItems = [\n    { id: 1, group: "group1", value: "drag 1" },\n    { id: 2, group: "group1", value: "drag 2" },\n    { id: 3, group: "group1", value: "drag 3" }\n  ];\n\n  return (\n    <>\n\n      // Creating the group divs \n\n      <div className="groups">\n        {groups.map((group) => (\n          <div className="group">\n            <h1 className="title">{group}</h1>\n            <div>\n\n              // Creating our items to drag and drop\n\n              {items\n                .filter((item) => item.group === group)\n                .map((item) => (\n                  <div\n                    key={item.id}\n                    id={item.id}\n                    className="item"\n\n                    // THIS MAKES THE ITEM DRAGGABLE!!!\n\n                    draggable\n                  >\n                     // item title\n                    {item.value}\n                  </div>\n                ))}\n            </div>\n          </div>\n        ))}\n      </div>\n    </>\n  );\n}\n\n'})}),"\n",(0,o.jsx)(e.p,{children:"Dnd.scss"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-scss",children:".groups {\n  display: flex;\n  margin: 5px;\n  padding: 5px;\n  flex-wrap: wrap;\n  \n\n  .group {\n    margin: 2px;\n    padding: 20px;\n    min-height: 16rem;\n    background-color: green;\n\n    .title{\n      color: white;\n      padding: 0;\n      margin-top: 0;\n    }\n  }\n}\n\n\n.item {\n  background-color: yellow;\n  color: blue;\n  margin: 5px;\n  padding: 5px;\n  border: 2px green;\n  cursor: grab;\n}\n"})}),"\n",(0,o.jsxs)(e.p,{children:["The code above creates something that looks like this:\n",(0,o.jsx)(e.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/qdoz1o8do2cr1zvt8s3y.png",alt:"Image description"})]}),"\n",(0,o.jsx)(e.p,{children:"Now we'll add the events and the event handlers. Make sure to read the comments in the code as that's where the explanations are. I think this is simpler than describing everything outside of the code."}),"\n",(0,o.jsxs)(e.p,{children:["Hint: The comments are easier to read in the ",(0,o.jsx)(e.a,{href:"https://codesandbox.io/s/change-cursor-on-dragover-rfl5u?file=/src/Dnd.js",children:"Code Sandbox"}),"."]}),"\n",(0,o.jsx)(e.p,{children:"Dnd.js"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-javascript",children:'import React, { useState } from "react";\nimport "./Dnd.scss";\n\nexport default function Dnd() {\n  // Initial groups to drag between\n  const groups = ["group1", "group2", "group3", "noDrop"];\n  // Initial items to be dragged \n  const initialItems = [\n    { id: 1, group: "group1", value: "drag 1" },\n    { id: 2, group: "group1", value: "drag 2" },\n    { id: 3, group: "group1", value: "drag 3" }\n  ];\n  // Sets the state of the items. I may add an "add" function later\n  // Can be used to add items\n  const [items, setItems] = useState(initialItems);\n  // Data about a thing\'s id, origin, and destination\n  const [dragData, setDragData] = useState({});\n  // Are we hovering over the noDrop div?\n  const [noDrop, setNoDrop] = useState("");\n\n  // onDragStart we setDragData.\n  // useState instead of e.dataTransfer so we can transfer more data\n  const handleDragStart = (e, id, group) => {\n    setDragData({ id: id, initialGroup: group });\n  };\n\n  // If we enter the noDrop zone the state will be updated\n  // Used for styling.\n  const handleDragEnter = (e, group) => {\n    if (group === "noDrop") {\n      setNoDrop("noDrop");\n    }\n  };\n\n  // DND will not work without this.\n  const handleDragOver = (e) => {\n    e.preventDefault();\n  };\n\n  // setNoDrop to nothing to return styling to normal\n  const handleDragLeave = (e) => {\n    setNoDrop("");\n  };\n\n  // 1. makes copy of items (newItems)\n  // 2. changes category of the item to its new group\n  // 3. setItem to our NewItems\n  const changeCategory = (itemId, group) => {\n    const newItems = [...items];\n    newItems[itemId - 1].group = group;\n    setItems([...newItems]);\n  };\n\n  // 1. setNoDrop in case item was dropped in noDrop\n  // 2. gets the item id\n  // 3. doesn\'t allow drop in noDrop\n  // 4. changeCategory (see above)\n  const handleDrop = (e, group) => {\n    setNoDrop("");\n    const selected = dragData.id;\n    if (group === "noDrop") {\n      console.log("nuh uh");\n    } else {\n      changeCategory(selected, group);\n    }\n  };\n\n  return (\n    <>\n      <div className="groups">\n        {/* iterate over groups */}\n        {groups.map((group) => (\n          <div\n            // change styling if dragging into noDrop zone\n            className={`${\n              group === "noDrop" && noDrop === "noDrop" ? noDrop : "group"\n            }`}\n            // event handlers\n            onDragEnter={(e) => handleDragEnter(e, group)}\n            onDragOver={handleDragOver}\n            onDragLeave={handleDragLeave}\n            onDrop={(e) => handleDrop(e, group)}\n            key={group}\n          >\n            <h1 className="title">{group}</h1>\n            <div>\n              {/* iterate over items */}\n              {items\n                .filter((item) => item.group === group)\n                .map((item) => (\n                  <div\n                    key={item.id}\n                    id={item.id}\n                    // change style if dragged over noDrop\n                    className={`${\n                      group === "noDrop" && noDrop === "noDrop"\n                        ? "notAllowed"\n                        : "item"\n                    }`}\n                    // MAKES THE ITEM DRAGGABLE!!!!\n                    draggable\n                    // event handler\n                    onDragStart={(e) => handleDragStart(e, item.id, group)}\n                  >\n                    {/* The name of each item */}\n                    {item.value}\n                  </div>\n                ))}\n            </div>\n          </div>\n        ))}\n      </div>\n    </>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.p,{children:"Dnd.scss"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-scss",children:".groups {\n  display: flex;\n  margin: 5px;\n  padding: 5px;\n  flex-wrap: wrap;\n  \n\n  .group {\n    margin: 2px;\n    padding: 20px;\n    min-height: 16rem;\n    background-color: green;\n\n    .title{\n      color: white;\n      padding: 0;\n      margin-top: 0;\n    }\n  }\n  .noDrop {\n    margin: 2px;\n    padding: 20px;\n    min-height: 16rem;\n    background-color: red;\n    cursor: not-allowed !important;\n\n    .title{\n      color: white;\n      padding: 0;\n      margin-top: 0;\n    }\n  }\n}\n\n\n.item {\n  background-color: yellow;\n  color: blue;\n  margin: 5px;\n  padding: 5px;\n  border: 2px green;\n  cursor: grab;\n}\n\n.notAllowed {\n  background-color: yellow;\n  color: blue;\n  margin: 5px;\n  padding: 5px;\n  border: 2px green;\n  cursor: not-allowed;\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"this-is-what-it-looks-like",children:"This is what it looks like"}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.img,{src:"https://dev-to-uploads.s3.amazonaws.com/uploads/articles/7vcxwt7g8lvah8amwn2r.gif",alt:"Image description"})}),"\n",(0,o.jsx)(e.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,o.jsx)(e.p,{children:"This is the basic gist of it. If you need something simple that works this is it, otherwise feel free to install a library."}),"\n",(0,o.jsxs)(e.p,{children:["Watch it in action! ",(0,o.jsx)(e.a,{href:"https://codesandbox.io/s/change-cursor-on-dragover-rfl5u?file=/src/Dnd.js",children:"See the Code Sandbox"})]})]})}function g(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>i,x:()=>s});var r=t(6540);const o={},a=r.createContext(o);function i(n){const e=r.useContext(a);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),r.createElement(a.Provider,{value:e},n.children)}},9867:n=>{n.exports=JSON.parse('{"permalink":"/blog/react-dnd","editUrl":"https://github.com/wolf-math/aaronwolfdev/tree/main/blog/2021-12-30-react-dnd.md","source":"@site/blog/2021-12-30-react-dnd.md","title":"Drag and drop from scratch with React","description":"Intro","date":"2021-12-30T00:00:00.000Z","tags":[{"inline":false,"label":"javascript","permalink":"/blog/tags/javascript","description":"javascript articles"},{"inline":false,"label":"react","permalink":"/blog/tags/react","description":"react articles"}],"readingTime":4.7,"hasTruncateMarker":true,"authors":[{"name":"Aaron wolf","title":"Lead writer and developer","url":"https://aaronwolf.dev","page":{"permalink":"/blog/authors/wolf"},"socials":{"linkedin":"https://www.linkedin.com/in/wolf-math/","github":"https://github.com/wolf-math"},"imageURL":"https://avatars.githubusercontent.com/u/29966332?v=4","key":"wolf"}],"frontMatter":{"slug":"react-dnd","title":"Drag and drop from scratch with React","authors":"wolf","tags":["javascript","react"]},"unlisted":false,"prevItem":{"title":"Temporal Date API","permalink":"/blog/temporal-datetime"},"nextItem":{"title":"Set up a Samba server on Ubuntu Linux","permalink":"/blog/samba-server-setup"}}')}}]);