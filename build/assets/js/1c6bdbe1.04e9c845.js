"use strict";(globalThis.webpackChunkaaronwolf_dev=globalThis.webpackChunkaaronwolf_dev||[]).push([[5287],{6806:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"coding/python/user_guide/oop/encapsulation","title":"Encapsulation","description":"What is encapsulation?","source":"@site/docs/coding/python/user_guide/oop/encapsulation.md","sourceDirName":"coding/python/user_guide/oop","slug":"/coding/python/user_guide/oop/encapsulation","permalink":"/docs/coding/python/user_guide/oop/encapsulation","draft":false,"unlisted":false,"editUrl":"https://github.com/wolf-math/aaronwolfdev/tree/main/docs/coding/python/user_guide/oop/encapsulation.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Encapsulation","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Instance methods","permalink":"/docs/coding/python/user_guide/oop/instance_methods"},"next":{"title":"Inheritance","permalink":"/docs/coding/python/user_guide/oop/inheritance"}}');var t=s(4848),l=s(8453);const a={title:"Encapsulation",sidebar_position:4},r=void 0,o={},c=[{value:"What is encapsulation?",id:"what-is-encapsulation",level:2},{value:"Why this matters",id:"why-this-matters",level:2},{value:"Public vs \u201cprivate\u201d attributes (by convention)",id:"public-vs-private-attributes-by-convention",level:2},{value:"Example: simple encapsulation with <code>_</code> prefix",id:"example-simple-encapsulation-with-_-prefix",level:3},{value:"Using properties to control access",id:"using-properties-to-control-access",level:2},{value:"Hiding implementation details",id:"hiding-implementation-details",level:2},{value:"Encapsulation and invariants",id:"encapsulation-and-invariants",level:2},{value:"Name mangling with <code>__double_underscore</code>",id:"name-mangling-with-__double_underscore",level:2},{value:"Encapsulation at the module level",id:"encapsulation-at-the-module-level",level:2},{value:"When to use encapsulation tools",id:"when-to-use-encapsulation-tools",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"what-is-encapsulation",children:"What is encapsulation?"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Encapsulation"})," is the OOP idea that an object should:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Hide its internal details"}),", and"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Expose a clean public interface"})," for other code to use."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"In practice, this means:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Keeping internal data and helper methods private\u2011ish."}),"\n",(0,t.jsx)(n.li,{children:"Providing well\u2011named methods and properties to interact with an object safely."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Python doesn\u2019t enforce strict privacy like some languages, but it gives you tools and conventions to signal ",(0,t.jsx)(n.em,{children:"\u201cthis is internal\u201d"})," vs ",(0,t.jsx)(n.em,{children:"\u201cthis is part of the public API.\u201d"})]}),"\n",(0,t.jsx)(n.h2,{id:"why-this-matters",children:"Why this matters"}),"\n",(0,t.jsx)(n.p,{children:"Encapsulation helps you:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Change how a class works ",(0,t.jsx)(n.strong,{children:"without"})," breaking the rest of your program."]}),"\n",(0,t.jsx)(n.li,{children:"Prevent other code from depending on internal details that might change."}),"\n",(0,t.jsxs)(n.li,{children:["Keep objects in a ",(0,t.jsx)(n.strong,{children:"valid state"})," by controlling how attributes are read and modified."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["When you design a class, you\u2019re really designing its ",(0,t.jsx)(n.em,{children:"interface"}),": what other code can do with its instances. Encapsulation keeps that interface small, clear, and robust."]}),"\n",(0,t.jsx)(n.h2,{id:"public-vs-private-attributes-by-convention",children:"Public vs \u201cprivate\u201d attributes (by convention)"}),"\n",(0,t.jsxs)(n.p,{children:["Python uses ",(0,t.jsx)(n.strong,{children:"naming conventions"})," instead of strict access modifiers:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["No leading underscore \u2192 ",(0,t.jsx)(n.strong,{children:"public"})," API","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Safe to use from other modules; considered stable."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Single leading underscore (",(0,t.jsx)(n.code,{children:"_name"}),") \u2192 ",(0,t.jsx)(n.strong,{children:"internal"})," implementation detail","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u201cYou can access this, but you probably shouldn\u2019t.\u201d"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Double leading underscore (",(0,t.jsx)(n.code,{children:"__name"}),") \u2192 ",(0,t.jsx)(n.strong,{children:"name-mangled"})," to reduce accidental access/override","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Used sparingly for avoiding attribute collisions in subclasses."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"example-simple-encapsulation-with-_-prefix",children:["Example: simple encapsulation with ",(0,t.jsx)(n.code,{children:"_"})," prefix"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"class Temperature:\n    def __init__(self, celsius):\n        self._celsius = celsius   # internal storage\n\n    def to_fahrenheit(self):\n        return self._celsius * 9 / 5 + 32\n"})}),"\n",(0,t.jsx)(n.p,{children:"From the outside:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'t = Temperature(20)\nprint(t.to_fahrenheit())  # 68.0\n# You *could* access t._celsius, but the underscore says "internal"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Other programmers will treat ",(0,t.jsx)(n.code,{children:"_celsius"})," as an implementation detail, not part of the public API."]}),"\n",(0,t.jsx)(n.h2,{id:"using-properties-to-control-access",children:"Using properties to control access"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://docs.python.org/3/library/functions.html#property",children:(0,t.jsx)(n.code,{children:"@property"})})," lets you expose an attribute\u2011like interface ",(0,t.jsx)(n.strong,{children:"with method\u2011like control"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'class Temperature:\n    def __init__(self, celsius):\n        self._celsius = celsius\n\n    @property\n    def celsius(self):\n        """Public read access."""\n        return self._celsius\n\n    @celsius.setter\n    def celsius(self, value):\n        if value < -273.15:\n            raise ValueError("Temperature below absolute zero!")\n        self._celsius = value\n\n    @property\n    def fahrenheit(self):\n        return self._celsius * 9 / 5 + 32\n'})}),"\n",(0,t.jsx)(n.p,{children:"Usage:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"t = Temperature(25)\nprint(t.celsius)      # 25  (getter)\nprint(t.fahrenheit)   # 77.0 (computed property)\n\nt.celsius = 0         # uses setter (valid)\nt.celsius = -300      # raises ValueError\n"})}),"\n",(0,t.jsxs)(n.p,{children:["From the outside, ",(0,t.jsx)(n.code,{children:"celsius"})," and ",(0,t.jsx)(n.code,{children:"fahrenheit"})," look like ",(0,t.jsx)(n.strong,{children:"normal attributes"}),", but internally you can:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Validate values"}),"\n",(0,t.jsx)(n.li,{children:"Compute derived values"}),"\n",(0,t.jsx)(n.li,{children:"Change implementation later without breaking callers"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"hiding-implementation-details",children:"Hiding implementation details"}),"\n",(0,t.jsxs)(n.p,{children:["Encapsulation lets you change ",(0,t.jsx)(n.em,{children:"how"})," something is stored or computed while keeping the same public interface."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'class User:\n    def __init__(self, username, password_plaintext):\n        self.username = username\n        self._password_hash = self._hash_password(password_plaintext)\n\n    def _hash_password(self, plaintext):\n        # Implementation detail (could change later)\n        import hashlib\n        return hashlib.sha256(plaintext.encode("utf-8")).hexdigest()\n\n    def check_password(self, attempt):\n        return self._hash_password(attempt) == self._password_hash\n'})}),"\n",(0,t.jsx)(n.p,{children:"From the outside:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'u = User("alice", "secret123")\nu.check_password("guess")      # False\nu.check_password("secret123")  # True\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Code using ",(0,t.jsx)(n.code,{children:"User"})," doesn\u2019t know or care how passwords are hashed. You can change ",(0,t.jsx)(n.code,{children:"_hash_password"})," later without breaking callers, as long as the ",(0,t.jsx)(n.strong,{children:"public methods"})," (",(0,t.jsx)(n.code,{children:"check_password"}),", etc.) behave the same."]}),"\n",(0,t.jsx)(n.h2,{id:"encapsulation-and-invariants",children:"Encapsulation and invariants"}),"\n",(0,t.jsxs)(n.p,{children:["An ",(0,t.jsx)(n.strong,{children:"invariant"})," is a condition that should always be true for a valid object (e.g., balance \u2265 0)."]}),"\n",(0,t.jsx)(n.p,{children:"Encapsulation helps enforce invariants by:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Keeping raw attributes private."}),"\n",(0,t.jsx)(n.li,{children:"Only changing them through methods that validate inputs."}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'class BankAccount:\n    def __init__(self, owner, balance=0):\n        self.owner = owner\n        self._balance = balance\n\n    @property\n    def balance(self):\n        return self._balance\n\n    def deposit(self, amount):\n        if amount < 0:\n            raise ValueError("Cannot deposit a negative amount")\n        self._balance += amount\n\n    def withdraw(self, amount):\n        if amount < 0:\n            raise ValueError("Cannot withdraw a negative amount")\n        if amount > self._balance:\n            raise ValueError("Insufficient funds")\n        self._balance -= amount\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Other code can read ",(0,t.jsx)(n.code,{children:"balance"}),", but it can\u2019t easily violate the invariant by setting ",(0,t.jsx)(n.code,{children:"_balance"})," directly (unless it intentionally ignores the underscore convention)."]}),"\n",(0,t.jsxs)(n.h2,{id:"name-mangling-with-__double_underscore",children:["Name mangling with ",(0,t.jsx)(n.code,{children:"__double_underscore"})]}),"\n",(0,t.jsxs)(n.p,{children:["Attributes starting with ",(0,t.jsx)(n.strong,{children:"two leading underscores"})," (and not ending with two) are ",(0,t.jsx)(n.em,{children:"name\u2011mangled"})," to include the class name. This reduces accidental override/collision in subclasses."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"class Base:\n    def __init__(self):\n        self.__secret = 42   # name-mangled to _Base__secret\n\nclass Child(Base):\n    def __init__(self):\n        super().__init__()\n        self.__secret = 99   # name-mangled to _Child__secret\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Here, ",(0,t.jsx)(n.code,{children:"Base"})," and ",(0,t.jsx)(n.code,{children:"Child"})," each get their own ",(0,t.jsx)(n.code,{children:"__secret"})," attribute internally:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"b = Base()\nc = Child()\n\nprint(dir(b))  # contains '_Base__secret'\nprint(dir(c))  # contains '_Base__secret' and '_Child__secret'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Name mangling is mainly useful when you\u2019re building classes meant to be subclassed and want to avoid accidental attribute clashes. For most day\u2011to\u2011day code, a single underscore is enough."}),"\n",(0,t.jsx)(n.h2,{id:"encapsulation-at-the-module-level",children:"Encapsulation at the module level"}),"\n",(0,t.jsx)(n.p,{children:"Encapsulation isn\u2019t just for classes\u2014Python modules also use naming conventions:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Names starting with ",(0,t.jsx)(n.code,{children:"_"})," (e.g., ",(0,t.jsx)(n.code,{children:"_helper_function"}),") are treated as ",(0,t.jsx)(n.strong,{children:"internal"})," to the module."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"from module import *"})," will skip names starting with ",(0,t.jsx)(n.code,{children:"_"})," unless you define ",(0,t.jsx)(n.code,{children:"__all__"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# mymodule.py\n\n_cache = {}  # internal\n\ndef public_api(x):\n    if x in _cache:\n        return _cache[x]\n    result = x * 2\n    _cache[x] = result\n    return result\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Here, ",(0,t.jsx)(n.code,{children:"_cache"})," is an internal detail; ",(0,t.jsx)(n.code,{children:"public_api"})," is the public function other code should use."]}),"\n",(0,t.jsx)(n.h2,{id:"when-to-use-encapsulation-tools",children:"When to use encapsulation tools"}),"\n",(0,t.jsx)(n.p,{children:"Use:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Leading underscores (",(0,t.jsx)(n.code,{children:"_name"}),") for ",(0,t.jsx)(n.strong,{children:"internal attributes and helpers"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Properties (",(0,t.jsx)(n.code,{children:"@property"})," and setters) when you need:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Validation"}),"\n",(0,t.jsx)(n.li,{children:"Computed values"}),"\n",(0,t.jsx)(n.li,{children:"The flexibility to change implementation later"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Double underscores (",(0,t.jsx)(n.code,{children:"__name"}),") sparingly, mainly to prevent accidental subclass collisions."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Avoid:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Exposing every attribute as public without thinking about invariants."}),"\n",(0,t.jsxs)(n.li,{children:["Overusing ",(0,t.jsx)(n.code,{children:"__double_underscore"})," when a single underscore and clear docs are enough."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"In this guide you learned that:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Encapsulation is about hiding internal details and exposing a clean public interface."}),"\n",(0,t.jsxs)(n.li,{children:["Python uses ",(0,t.jsx)(n.strong,{children:"conventions"})," (",(0,t.jsx)(n.code,{children:"_name"}),", ",(0,t.jsx)(n.code,{children:"__name"}),") instead of strict access modifiers."]}),"\n",(0,t.jsxs)(n.li,{children:["Properties (",(0,t.jsx)(n.code,{children:"@property"}),") let you present attributes while still validating and controlling access."]}),"\n",(0,t.jsx)(n.li,{children:"Good encapsulation protects invariants and makes it easier to evolve your classes without breaking callers."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["As you design classes, think in terms of: ",(0,t.jsx)(n.em,{children:"\u201cWhat should other code be allowed to do with this object?\u201d"})," Then use encapsulation tools to keep that contract clear and stable."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>r});var i=s(6540);const t={},l=i.createContext(t);function a(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);