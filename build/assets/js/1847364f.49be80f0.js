"use strict";(globalThis.webpackChunkaaronwolf_dev=globalThis.webpackChunkaaronwolf_dev||[]).push([[4438],{1605:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"coding/python/user_guide/standard_library/json","title":"Reading and writing JSON","description":"What is JSON?","source":"@site/docs/coding/python/user_guide/standard_library/json.md","sourceDirName":"coding/python/user_guide/standard_library","slug":"/coding/python/user_guide/standard_library/json","permalink":"/docs/coding/python/user_guide/standard_library/json","draft":false,"unlisted":false,"editUrl":"https://github.com/wolf-math/aaronwolfdev/tree/main/docs/coding/python/user_guide/standard_library/json.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Reading and writing JSON","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"File handling basics","permalink":"/docs/coding/python/user_guide/standard_library/file_handling"},"next":{"title":"datetime","permalink":"/docs/coding/python/user_guide/standard_library/datetime"}}');var t=s(4848),d=s(8453);const o={title:"Reading and writing JSON",sidebar_position:3},r=void 0,l={},a=[{value:"What is JSON?",id:"what-is-json",level:2},{value:"Why this matters",id:"why-this-matters",level:2},{value:"The <code>json</code> module at a glance",id:"the-json-module-at-a-glance",level:2},{value:"Reading JSON from a file",id:"reading-json-from-a-file",level:2},{value:"Basic example",id:"basic-example",level:3},{value:"Reading lists of objects",id:"reading-lists-of-objects",level:3},{value:"Writing JSON to a file",id:"writing-json-to-a-file",level:2},{value:"Basic example",id:"basic-example-1",level:3},{value:"Pretty-printing JSON",id:"pretty-printing-json",level:3},{value:"Controlling encoding and newlines",id:"controlling-encoding-and-newlines",level:2},{value:"Using <code>json.loads</code> and <code>json.dumps</code>",id:"using-jsonloads-and-jsondumps",level:2},{value:"Handling errors when reading JSON",id:"handling-errors-when-reading-json",level:2},{value:"Invalid JSON",id:"invalid-json",level:3},{value:"Missing file",id:"missing-file",level:3},{value:"Custom types and <code>default</code>",id:"custom-types-and-default",level:2},{value:"Putting it all together: simple JSON config helper",id:"putting-it-all-together-simple-json-config-helper",level:2},{value:"Summary",id:"summary",level:2}];function c(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:"what-is-json",children:"What is JSON?"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"JSON"})," (JavaScript Object Notation) is a lightweight text format for storing and exchanging data. It\u2019s:"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Human-readable"}),"\n",(0,t.jsx)(e.li,{children:"Language-independent"}),"\n",(0,t.jsx)(e.li,{children:"Widely used in APIs, configuration files, and data interchange"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"JSON maps naturally to Python types:"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"JSON"}),(0,t.jsx)(e.th,{children:"Python"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"object"})}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"dict"})})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"array"})}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"list"})})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"string"})}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"str"})})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"number"})}),(0,t.jsxs)(e.td,{children:[(0,t.jsx)(e.code,{children:"int"})," / ",(0,t.jsx)(e.code,{children:"float"})]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsxs)(e.td,{children:[(0,t.jsx)(e.code,{children:"true"})," / ",(0,t.jsx)(e.code,{children:"false"})]}),(0,t.jsxs)(e.td,{children:[(0,t.jsx)(e.code,{children:"True"})," / ",(0,t.jsx)(e.code,{children:"False"})]})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"null"})}),(0,t.jsx)(e.td,{children:(0,t.jsx)(e.code,{children:"None"})})]})]})]}),"\n",(0,t.jsxs)(e.p,{children:["Python\u2019s built-in ",(0,t.jsx)(e.a,{href:"https://docs.python.org/3/library/json.html",children:(0,t.jsx)(e.code,{children:"json"})})," module handles converting between JSON and Python objects."]}),"\n",(0,t.jsx)(e.h2,{id:"why-this-matters",children:"Why this matters"}),"\n",(0,t.jsx)(e.p,{children:"JSON shows up everywhere:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Talking to web APIs"}),"\n",(0,t.jsx)(e.li,{children:"Saving settings and configuration"}),"\n",(0,t.jsx)(e.li,{children:"Exchanging data between services"}),"\n",(0,t.jsx)(e.li,{children:"Storing lightweight structured data on disk"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"Knowing how to read and write JSON lets your Python programs integrate with the rest of the world."}),"\n",(0,t.jsxs)(e.p,{children:["This guide focuses on ",(0,t.jsx)(e.strong,{children:"file-based"})," JSON: loading JSON from files and saving Python objects back to disk."]}),"\n",(0,t.jsxs)(e.h2,{id:"the-json-module-at-a-glance",children:["The ",(0,t.jsx)(e.code,{children:"json"})," module at a glance"]}),"\n",(0,t.jsx)(e.p,{children:"Import the module:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"import json\n"})}),"\n",(0,t.jsx)(e.p,{children:"Core functions:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"json.load(file)"})," \u2014 read JSON ",(0,t.jsx)(e.strong,{children:"from a file object"})," \u2192 Python object"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"json.dump(obj, file, ...)"})," \u2014 write Python object ",(0,t.jsx)(e.strong,{children:"to a file object"})," as JSON"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"json.loads(string)"})," \u2014 read JSON ",(0,t.jsx)(e.strong,{children:"from a string"})," \u2192 Python object"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"json.dumps(obj, ...)"})," \u2014 convert Python object ",(0,t.jsx)(e.strong,{children:"to a JSON string"})]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["For file handling, you\u2019ll mostly use ",(0,t.jsx)(e.code,{children:"load"})," and ",(0,t.jsx)(e.code,{children:"dump"})," together with ",(0,t.jsx)(e.code,{children:"with open(...)"}),"."]}),"\n",(0,t.jsx)(e.h2,{id:"reading-json-from-a-file",children:"Reading JSON from a file"}),"\n",(0,t.jsx)(e.h3,{id:"basic-example",children:"Basic example"}),"\n",(0,t.jsxs)(e.p,{children:["Suppose ",(0,t.jsx)(e.code,{children:"config.json"})," contains:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "debug": true,\n  "host": "localhost",\n  "port": 8000\n}\n'})}),"\n",(0,t.jsx)(e.p,{children:"Read it into Python:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import json\n\nwith open("config.json", "r", encoding="utf-8") as f:\n    config = json.load(f)\n\nprint(config["debug"])  # True\nprint(config["host"])   # \'localhost\'\nprint(config["port"])   # 8000\n'})}),"\n",(0,t.jsx)(e.p,{children:"Behind the scenes:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:'open("config.json", "r", encoding="utf-8")'})," opens the file in text mode"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"json.load(f)"})," parses the JSON text into Python objects (here, a ",(0,t.jsx)(e.code,{children:"dict"}),")"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"reading-lists-of-objects",children:"Reading lists of objects"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'[\n  {"id": 1, "name": "Alice"},\n  {"id": 2, "name": "Bob"}\n]\n'})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import json\n\nwith open("users.json", "r", encoding="utf-8") as f:\n    users = json.load(f)\n\nfor user in users:\n    print(user["id"], user["name"])\n'})}),"\n",(0,t.jsx)(e.h2,{id:"writing-json-to-a-file",children:"Writing JSON to a file"}),"\n",(0,t.jsx)(e.h3,{id:"basic-example-1",children:"Basic example"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import json\n\ndata = {\n    "debug": False,\n    "host": "0.0.0.0",\n    "port": 8080,\n}\n\nwith open("config.json", "w", encoding="utf-8") as f:\n    json.dump(data, f)\n'})}),"\n",(0,t.jsx)(e.p,{children:"This will produce compact JSON like:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{"debug": false, "host": "0.0.0.0", "port": 8080}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"pretty-printing-json",children:"Pretty-printing JSON"}),"\n",(0,t.jsxs)(e.p,{children:["Use ",(0,t.jsx)(e.code,{children:"indent"})," to make JSON easier to read:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'with open("config_pretty.json", "w", encoding="utf-8") as f:\n    json.dump(data, f, indent=2)\n'})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "debug": false,\n  "host": "0.0.0.0",\n  "port": 8080\n}\n'})}),"\n",(0,t.jsxs)(e.p,{children:["You can also control key order with ",(0,t.jsx)(e.code,{children:"sort_keys=True"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'with open("config_sorted.json", "w", encoding="utf-8") as f:\n    json.dump(data, f, indent=2, sort_keys=True)\n'})}),"\n",(0,t.jsx)(e.h2,{id:"controlling-encoding-and-newlines",children:"Controlling encoding and newlines"}),"\n",(0,t.jsx)(e.p,{children:"JSON is text, typically encoded as UTF-8."}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'with open("data.json", "w", encoding="utf-8") as f:\n    json.dump(data, f, ensure_ascii=False)\n'})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:'encoding="utf-8"'})," ensures proper Unicode handling."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"ensure_ascii=False"})," lets non-ASCII characters (like accents or emojis) be written directly instead of as escape sequences."]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"Example:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'data = {"name": "Jos\xe9", "emoji": "\ud83d\udc0d"}\n\nwith open("user.json", "w", encoding="utf-8") as f:\n    json.dump(data, f, ensure_ascii=False, indent=2)\n'})}),"\n",(0,t.jsxs)(e.h2,{id:"using-jsonloads-and-jsondumps",children:["Using ",(0,t.jsx)(e.code,{children:"json.loads"})," and ",(0,t.jsx)(e.code,{children:"json.dumps"})]}),"\n",(0,t.jsx)(e.p,{children:"Sometimes your JSON isn\u2019t in a file (e.g., an HTTP response body). You can still use the same module:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import json\n\njson_text = \'{"active": true, "roles": ["admin", "editor"]}\'\n\ndata = json.loads(json_text)\nprint(data["active"])  # True\n\nback_to_text = json.dumps(data)\nprint(back_to_text)    # \'{"active": true, "roles": ["admin", "editor"]}\'\n'})}),"\n",(0,t.jsx)(e.p,{children:"You can combine this with file reading/writing yourself if you want more control:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'with open("data.json", "r", encoding="utf-8") as f:\n    text = f.read()\ndata = json.loads(text)\n'})}),"\n",(0,t.jsxs)(e.p,{children:["\u2026but in most cases ",(0,t.jsx)(e.code,{children:"json.load"})," / ",(0,t.jsx)(e.code,{children:"json.dump"})," are simpler."]}),"\n",(0,t.jsx)(e.h2,{id:"handling-errors-when-reading-json",children:"Handling errors when reading JSON"}),"\n",(0,t.jsx)(e.h3,{id:"invalid-json",children:"Invalid JSON"}),"\n",(0,t.jsxs)(e.p,{children:["If the file is not valid JSON, ",(0,t.jsx)(e.code,{children:"json.load"})," will raise ",(0,t.jsx)(e.code,{children:"json.JSONDecodeError"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import json\n\ntry:\n    with open("broken.json", "r", encoding="utf-8") as f:\n        data = json.load(f)\nexcept json.JSONDecodeError as e:\n    print("Invalid JSON:", e)\n'})}),"\n",(0,t.jsx)(e.h3,{id:"missing-file",children:"Missing file"}),"\n",(0,t.jsxs)(e.p,{children:["Combine with ",(0,t.jsx)(e.code,{children:"FileNotFoundError"})," handling from the basics guide:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import json\n\ntry:\n    with open("settings.json", "r", encoding="utf-8") as f:\n        settings = json.load(f)\nexcept FileNotFoundError:\n    print("settings.json not found, using defaults")\n    settings = {}\n'})}),"\n",(0,t.jsxs)(e.h2,{id:"custom-types-and-default",children:["Custom types and ",(0,t.jsx)(e.code,{children:"default"})]}),"\n",(0,t.jsxs)(e.p,{children:["JSON only supports basic types. If you try to dump a custom object, you\u2019ll get a ",(0,t.jsx)(e.code,{children:"TypeError"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import json\nfrom datetime import datetime\n\ndata = {"time": datetime.now()}\n\njson.dumps(data)  # TypeError: Object of type datetime is not JSON serializable\n'})}),"\n",(0,t.jsxs)(e.p,{children:["Use the ",(0,t.jsx)(e.code,{children:"default"})," parameter to convert unsupported objects:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'def default_converter(obj):\n    if isinstance(obj, datetime):\n        return obj.isoformat()\n    raise TypeError(f"Type {type(obj)} not serializable")\n\njson_text = json.dumps(data, default=default_converter, indent=2)\nprint(json_text)\n'})}),"\n",(0,t.jsxs)(e.p,{children:["For reading, you can post-process fields after ",(0,t.jsx)(e.code,{children:"json.load"})," (e.g., parse ISO strings back into ",(0,t.jsx)(e.code,{children:"datetime"})," objects)."]}),"\n",(0,t.jsx)(e.h2,{id:"putting-it-all-together-simple-json-config-helper",children:"Putting it all together: simple JSON config helper"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import json\nfrom pathlib import Path\n\ndef load_json(path, default=None):\n    """Load JSON from a file, or return default if it doesn\'t exist."""\n    path = Path(path)\n    if not path.exists():\n        return {} if default is None else default\n    with path.open("r", encoding="utf-8") as f:\n        return json.load(f)\n\ndef save_json(path, data):\n    """Save JSON to a file with pretty formatting."""\n    path = Path(path)\n    with path.open("w", encoding="utf-8") as f:\n        json.dump(data, f, indent=2, ensure_ascii=False)\n\nsettings = load_json("settings.json", default={"theme": "dark"})\nsettings["theme"] = "light"\nsave_json("settings.json", settings)\n'})}),"\n",(0,t.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(e.p,{children:"In this JSON-focused installment you learned how to:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Use the ",(0,t.jsx)(e.code,{children:"json"})," module (",(0,t.jsx)(e.code,{children:"load"}),", ",(0,t.jsx)(e.code,{children:"dump"}),", ",(0,t.jsx)(e.code,{children:"loads"}),", ",(0,t.jsx)(e.code,{children:"dumps"}),")"]}),"\n",(0,t.jsx)(e.li,{children:"Read JSON from files into Python dictionaries and lists"}),"\n",(0,t.jsx)(e.li,{children:"Write Python objects back to disk as JSON"}),"\n",(0,t.jsxs)(e.li,{children:["Pretty-print and control encoding with ",(0,t.jsx)(e.code,{children:"indent"}),", ",(0,t.jsx)(e.code,{children:"sort_keys"}),", and ",(0,t.jsx)(e.code,{children:"ensure_ascii"})]}),"\n",(0,t.jsx)(e.li,{children:"Handle common errors like invalid JSON and missing files"}),"\n",(0,t.jsxs)(e.li,{children:["Start dealing with custom types using the ",(0,t.jsx)(e.code,{children:"default"})," argument"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["A natural next step is to look at ",(0,t.jsx)(e.strong,{children:"CSV handling"})," (for tabular data) or to explore more advanced patterns with ",(0,t.jsx)(e.code,{children:"pathlib"}),", context managers, and streaming large JSON files.***"]})]})}function h(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>o,x:()=>r});var i=s(6540);const t={},d=i.createContext(t);function o(n){const e=i.useContext(d);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),i.createElement(d.Provider,{value:e},n.children)}}}]);